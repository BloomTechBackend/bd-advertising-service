Resources:
  InitializeTargetingGroupTableFunction1:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          const AWS = require("aws-sdk");
          const response = require('./cfn-response');
          const docClient = new AWS.DynamoDB.DocumentClient();
          exports.handler = function(event, context) {
            const batchWriteRequest = {
              RequestItems: {
                "TargetingGroups": [ // this must match the table name
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "a91c8938-0f04-41d0-bea5-477fd3228383",
                        ContentId: "cd00c6d4-9b48-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.03,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.RecognizedTargetingPredicate","inverse":true}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "55f363fd-b93e-4bf8-9705-e41d45b46788",
                        ContentId: "cd00ce40-9b48-11e8-98d0-529269fb1459",
                        ClickThroughRate: 2.0,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"UNDER_18"}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "28afd959-1cf4-47e8-8683-729800ea2f09",
                        ContentId: "cd00cf58-9b48-11e8-98d0-529269fb1459",
                        ClickThroughRate: 2.0,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"UNDER_18"}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "a5bc9138-440d-44ca-b0b2-b7062d129f29",
                        ContentId: "1d2e7910-9b4b-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.09,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_18_TO_21"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"COMPUTERS","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "0d7c66b7-131f-42d6-8703-9f100e406266",
                        ContentId: "3b90a0a0-9be5-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.1,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_46_TO_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendValueTargetingPredicate","inverse":false,"targetedCategory":"COMPUTERS","comparison":"GT","targetedValue":50}]'
                      }
                    }
                  }
                ]
              }
            };
            docClient.batchWrite(batchWriteRequest, function (err, data) {
              if (err) {
                  console.error(err);
                  response.send(event, context, "FAILED", {"error" : err});
              } else {
                  response.send(event, context, "SUCCESS", {"data" : data});
              }
            });
          };
      Handler: index.handler
      Role:
        Fn::GetAtt: [ LambdaRole , "Arn" ] # Same role as the service lambda with DDB write access
      Runtime: nodejs12.x
      Timeout: 60

  InitializeTargetingGroupTable1:
    Type: Custom::InitFunction
    DependsOn: TargetingGroupsTable
    Properties:
      ServiceToken:
        Fn::GetAtt: [ InitializeTargetingGroupTableFunction1 , "Arn" ]
      DynamoTableName:
        Ref: TargetingGroupsTable

  InitializeTargetingGroupTableFunction2:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          const AWS = require("aws-sdk");
          const response = require('./cfn-response');
          const docClient = new AWS.DynamoDB.DocumentClient();
          exports.handler = function(event, context) {
            const batchWriteRequest = {
              RequestItems: {
                "TargetingGroups": [ // this must match the table name
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "b9be0954-dcf0-49f7-8ecf-430f3883f072",
                        ContentId: "3b90a0a0-9be5-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.097,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"COMPUTERS","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "b365b619-a61a-478f-84f8-9163ffcf2826",
                        ContentId: "cd00cbfc-9b48-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.03,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.RecognizedTargetingPredicate","inverse":true}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "11d33609-b835-42d5-bcb3-e7bec188d961",
                        ContentId: "0b632bce-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.12716,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_31_TO_35"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendValueTargetingPredicate","inverse":false,"targetedCategory":"ELECTRONICS","comparison":"GT","targetedValue":50}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "def2ee90-5734-42f9-b96b-a26b9e8691a8",
                        ContentId: "0b632bce-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.03819,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_36_TO_45"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendValueTargetingPredicate","inverse":false,"targetedCategory":"ELECTRONICS","comparison":"GT","targetedValue":50}]'
                      }
                    }
                  }
                ]
              }
            };
            docClient.batchWrite(batchWriteRequest, function (err, data) {
              if (err) {
                  console.error(err);
                  response.send(event, context, "FAILED", {"error" : err});
              } else {
                  response.send(event, context, "SUCCESS", {"data" : data});
              }
            });
          };
      Handler: index.handler
      Role:
        Fn::GetAtt: [ LambdaRole , "Arn" ] # Same role as the service lambda with DDB write access
      Runtime: nodejs12.x
      Timeout: 60

  InitializeTargetingGroupTable2:
    Type: Custom::InitFunction
    DependsOn: TargetingGroupsTable
    Properties:
      ServiceToken:
        Fn::GetAtt: [ InitializeTargetingGroupTableFunction2 , "Arn" ]
      DynamoTableName:
        Ref: TargetingGroupsTable

  InitializeTargetingGroupTableFunction3:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          const AWS = require("aws-sdk");
          const response = require('./cfn-response');
          const docClient = new AWS.DynamoDB.DocumentClient();
          exports.handler = function(event, context) {
            const batchWriteRequest = {
              RequestItems: {
                "TargetingGroups": [ // this must match the table name
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "e98c116e-93dc-4e1b-a0de-ada8f85dbaad",
                        ContentId: "0b632bce-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.07211,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_46_TO_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendValueTargetingPredicate","inverse":false,"targetedCategory":"ELECTRONICS","comparison":"GT","targetedValue":50}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "626cd58d-4038-404a-b0b6-2e4c5dfd7fbd",
                        ContentId: "0b632bce-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.11873,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendValueTargetingPredicate","inverse":false,"targetedCategory":"ELECTRONICS","comparison":"GT","targetedValue":50}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "0f50e16b-1050-4f2f-8cb1-cb0f4c3b732c",
                        ContentId: "cd00d07a-9b48-11e8-98d0-529269fb1459",
                        ClickThroughRate: 2.0,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"UNDER_18"}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "0a551429-acf2-450e-a788-82fd3828011f",
                        ContentId: "0859b575-7e33-401c-9dcb-401e5f695d64",
                        ClickThroughRate: 0.03,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.RecognizedTargetingPredicate","inverse":true}]'
                      }
                    }
                  }
                ]
              }
            };
            docClient.batchWrite(batchWriteRequest, function (err, data) {
              if (err) {
                  console.error(err);
                  response.send(event, context, "FAILED", {"error" : err});
              } else {
                  response.send(event, context, "SUCCESS", {"data" : data});
              }
            });
          };
      Handler: index.handler
      Role:
        Fn::GetAtt: [ LambdaRole , "Arn" ] # Same role as the service lambda with DDB write access
      Runtime: nodejs12.x
      Timeout: 60

  InitializeTargetingGroupTable3:
    Type: Custom::InitFunction
    DependsOn: TargetingGroupsTable
    Properties:
      ServiceToken:
        Fn::GetAtt: [ InitializeTargetingGroupTableFunction3 , "Arn" ]
      DynamoTableName:
        Ref: TargetingGroupsTable

  InitializeTargetingGroupTableFunction4:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          const AWS = require("aws-sdk");
          const response = require('./cfn-response');
          const docClient = new AWS.DynamoDB.DocumentClient();
          exports.handler = function(event, context) {
            const batchWriteRequest = {
              RequestItems: {
                "TargetingGroups": [ // this must match the table name
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "7144c412-59aa-4c08-9f3a-87e61c600ce0",
                        ContentId: "0b63284a-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.19161,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_18_TO_21"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.PrimeBenefitTargetingPredicate","inverse":true,"benefitToHave":"FREE_EXPEDITED_SHIPPING"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"TECHNICAL_BOOKS","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "c3d46895-30df-4b53-abf6-e5d3e989b1d8",
                        ContentId: "0b63284a-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.04262,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_22_TO_25"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.PrimeBenefitTargetingPredicate","inverse":true,"benefitToHave":"FREE_EXPEDITED_SHIPPING"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"TECHNICAL_BOOKS","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "a71fa83e-bafc-4d57-a8b3-5f88cf8a9bcb",
                        ContentId: "0b63284a-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.12457,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_26_TO_30"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.PrimeBenefitTargetingPredicate","inverse":true,"benefitToHave":"FREE_EXPEDITED_SHIPPING"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"TECHNICAL_BOOKS","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  }
                 ]
              }
            };
            docClient.batchWrite(batchWriteRequest, function (err, data) {
              if (err) {
                  console.error(err);
                  response.send(event, context, "FAILED", {"error" : err});
              } else {
                  response.send(event, context, "SUCCESS", {"data" : data});
              }
            });
          };
      Handler: index.handler
      Role:
        Fn::GetAtt: [ LambdaRole , "Arn" ] # Same role as the service lambda with DDB write access
      Runtime: nodejs12.x
      Timeout: 60

  InitializeTargetingGroupTable4:
    Type: Custom::InitFunction
    DependsOn: TargetingGroupsTable
    Properties:
      ServiceToken:
        Fn::GetAtt: [ InitializeTargetingGroupTableFunction4 , "Arn" ]
      DynamoTableName:
        Ref: TargetingGroupsTable

  InitializeTargetingGroupTableFunction5:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          const AWS = require("aws-sdk");
          const response = require('./cfn-response');
          const docClient = new AWS.DynamoDB.DocumentClient();
          exports.handler = function(event, context) {
            const batchWriteRequest = {
              RequestItems: {
                "TargetingGroups": [ // this must match the table name
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "8533d24b-1fad-493e-b043-f431c980ad9d",
                        ContentId: "1d2e74a6-9b4b-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.095,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.PrimeBenefitTargetingPredicate","inverse":false,"benefitToHave":"MOM_DISCOUNT"}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "c7bb737f-7cfb-4ca8-a695-402f69588544",
                        ContentId: "cd00d1f6-9b48-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.085,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "eecf61af-7391-4d6a-8f69-e570c1353a84",
                        ContentId: "0b634500-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.0935,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_36_TO_45"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_46_TO_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"TECHNICAL_BOOKS","comparison":"GT","targetedNumberOfPurchases":0},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"COMPUTERS","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "13aad259-bd3f-4583-99c0-49ee4c88b4da",
                        ContentId: "0b63428a-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.06713,
                        TargetingPredicates: "[]"
                      }
                    }
                  }
                 ]
              }
            };
            docClient.batchWrite(batchWriteRequest, function (err, data) {
              if (err) {
                  console.error(err);
                  response.send(event, context, "FAILED", {"error" : err});
              } else {
                  response.send(event, context, "SUCCESS", {"data" : data});
              }
            });
          };
      Handler: index.handler
      Role:
        Fn::GetAtt: [ LambdaRole , "Arn" ] # Same role as the service lambda with DDB write access
      Runtime: nodejs12.x
      Timeout: 60

  InitializeTargetingGroupTable5:
    Type: Custom::InitFunction
    DependsOn: TargetingGroupsTable
    Properties:
      ServiceToken:
        Fn::GetAtt: [ InitializeTargetingGroupTableFunction5 , "Arn" ]
      DynamoTableName:
        Ref: TargetingGroupsTable

  InitializeTargetingGroupTableFunction6:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          const AWS = require("aws-sdk");
          const response = require('./cfn-response');
          const docClient = new AWS.DynamoDB.DocumentClient();
          exports.handler = function(event, context) {
            const batchWriteRequest = {
              RequestItems: {
                "TargetingGroups": [ // this must match the table name
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "fe1b23bb-3886-4bca-b960-e116f9656578",
                        ContentId: "0b63307e-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.19417,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_46_TO_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"PRIME_VIDEO","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "8c29cc96-dac9-43a8-bb86-b4f9e29c35ca",
                        ContentId: "0b63307e-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.13853,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_46_TO_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"AMAZON_MUSIC","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "007d0bb4-390f-4dcb-a354-29dec85961e0",
                        ContentId: "0b633934-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.1184,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_18_TO_21"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.PrimeBenefitTargetingPredicate","inverse":false,"benefitToHave":"FREE_EXPEDITED_SHIPPING"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"VIDEO_GAMES","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "d91658dc-bcde-4c70-a955-75e5bc80dc53",
                        ContentId: "0b6359f0-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.05262,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false}]'
                      }
                    }
                  }
                 ]
              }
            };
            docClient.batchWrite(batchWriteRequest, function (err, data) {
              if (err) {
                  console.error(err);
                  response.send(event, context, "FAILED", {"error" : err});
              } else {
                  response.send(event, context, "SUCCESS", {"data" : data});
              }
            });
          };
      Handler: index.handler
      Role:
        Fn::GetAtt: [ LambdaRole , "Arn" ] # Same role as the service lambda with DDB write access
      Runtime: nodejs12.x
      Timeout: 60

  InitializeTargetingGroupTable6:
    Type: Custom::InitFunction
    DependsOn: TargetingGroupsTable
    Properties:
      ServiceToken:
        Fn::GetAtt: [ InitializeTargetingGroupTableFunction6 , "Arn" ]
      DynamoTableName:
        Ref: TargetingGroupsTable

  InitializeTargetingGroupTableFunction7:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          const AWS = require("aws-sdk");
          const response = require('./cfn-response');
          const docClient = new AWS.DynamoDB.DocumentClient();
          exports.handler = function(event, context) {
            const batchWriteRequest = {
              RequestItems: {
                "TargetingGroups": [ // this must match the table name
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "b389bc42-7a18-4196-bc4f-7a0515728311",
                        ContentId: "0b632e26-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.03929,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_18_TO_21"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"FRESH","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "249959cc-eab8-4d76-8434-4803fc877246",
                        ContentId: "0b632e26-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.0073,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_22_TO_25"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"FRESH","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "1d3686dd-9211-46e6-b315-abcbeeb3c97d",
                        ContentId: "0b632e26-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.18007,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_26_TO_30"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"FRESH","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "8b4e796d-d251-4c07-9e45-875220f4810d",
                        ContentId: "0b632e26-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.03437,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_31_TO_35"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"FRESH","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  }
                 ]
              }
            };
            docClient.batchWrite(batchWriteRequest, function (err, data) {
              if (err) {
                  console.error(err);
                  response.send(event, context, "FAILED", {"error" : err});
              } else {
                  response.send(event, context, "SUCCESS", {"data" : data});
              }
            });
          };
      Handler: index.handler
      Role:
        Fn::GetAtt: [ LambdaRole , "Arn" ] # Same role as the service lambda with DDB write access
      Runtime: nodejs12.x
      Timeout: 60

  InitializeTargetingGroupTable7:
    Type: Custom::InitFunction
    DependsOn: TargetingGroupsTable
    Properties:
      ServiceToken:
        Fn::GetAtt: [ InitializeTargetingGroupTableFunction7 , "Arn" ]
      DynamoTableName:
        Ref: TargetingGroupsTable

  InitializeTargetingGroupTableFunction8:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          const AWS = require("aws-sdk");
          const response = require('./cfn-response');
          const docClient = new AWS.DynamoDB.DocumentClient();
          exports.handler = function(event, context) {
            const batchWriteRequest = {
              RequestItems: {
                "TargetingGroups": [ // this must match the table name
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "91e5ef85-6f72-4ea6-92e9-29fba5bf90bb",
                        ContentId: "0b6332d6-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.05028,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_18_TO_21"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_22_TO_25"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.PrimeBenefitTargetingPredicate","inverse":false,"benefitToHave":"DIM_SUM"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"KINDLE","comparison":"GT","targetedNumberOfPurchases":0},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"TECHNICAL_BOOKS","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "025bb45e-ce1e-4110-8188-9b2f81f5c305",
                        ContentId: "0b63403c-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.15268,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"AGE_46_TO_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.PrimeBenefitTargetingPredicate","inverse":false,"benefitToHave":"MOM_DISCOUNT"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendValueTargetingPredicate","inverse":false,"targetedCategory":"VIDEO_GAMES","comparison":"GT","targetedValue":50}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "c7cba0dd-3ab9-49e5-8bb5-eb0530b5da0a",
                        ContentId: "0b63403c-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.17109,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.PrimeBenefitTargetingPredicate","inverse":false,"benefitToHave":"MOM_DISCOUNT"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendValueTargetingPredicate","inverse":false,"targetedCategory":"VIDEO_GAMES","comparison":"GT","targetedValue":50}]'
                      }
                    }
                  }
                 ]
              }
            };
            docClient.batchWrite(batchWriteRequest, function (err, data) {
              if (err) {
                  console.error(err);
                  response.send(event, context, "FAILED", {"error" : err});
              } else {
                  response.send(event, context, "SUCCESS", {"data" : data});
              }
            });
          };
      Handler: index.handler
      Role:
        Fn::GetAtt: [ LambdaRole , "Arn" ] # Same role as the service lambda with DDB write access
      Runtime: nodejs12.x
      Timeout: 60

  InitializeTargetingGroupTable8:
    Type: Custom::InitFunction
    DependsOn: TargetingGroupsTable
    Properties:
      ServiceToken:
        Fn::GetAtt: [ InitializeTargetingGroupTableFunction8 , "Arn" ]
      DynamoTableName:
        Ref: TargetingGroupsTable

  InitializeTargetingGroupTableFunction9:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          const AWS = require("aws-sdk");
          const response = require('./cfn-response');
          const docClient = new AWS.DynamoDB.DocumentClient();
          exports.handler = function(event, context) {
            const batchWriteRequest = {
              RequestItems: {
                "TargetingGroups": [ // this must match the table name
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "caa1e249-c02c-47a7-a8f6-e019b856ac29",
                        ContentId: "0b633bb4-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.19168,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":false,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.PrimeBenefitTargetingPredicate","inverse":false,"benefitToHave":"FREE_EXPEDITED_SHIPPING"}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "b6ec3b1a-37c8-45e3-ae9e-6a2ce4ec8ffb",
                        ContentId: "0b633dee-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.16681,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_18_TO_21"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_46_TO_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"VIDEO_GAMES","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "bb631243-e108-41ea-8cd0-fd2bad2a48df",
                        ContentId: "0b633dee-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.03204,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_18_TO_21"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_46_TO_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"COMPUTERS","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  }
                 ]
              }
            };
            docClient.batchWrite(batchWriteRequest, function (err, data) {
              if (err) {
                  console.error(err);
                  response.send(event, context, "FAILED", {"error" : err});
              } else {
                  response.send(event, context, "SUCCESS", {"data" : data});
              }
            });
          };
      Handler: index.handler
      Role:
        Fn::GetAtt: [ LambdaRole , "Arn" ] # Same role as the service lambda with DDB write access
      Runtime: nodejs12.x
      Timeout: 60

  InitializeTargetingGroupTable9:
    Type: Custom::InitFunction
    DependsOn: TargetingGroupsTable
    Properties:
      ServiceToken:
        Fn::GetAtt: [ InitializeTargetingGroupTableFunction9 , "Arn" ]
      DynamoTableName:
        Ref: TargetingGroupsTable

  InitializeTargetingGroupTableFunction10:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          const AWS = require("aws-sdk");
          const response = require('./cfn-response');
          const docClient = new AWS.DynamoDB.DocumentClient();
          exports.handler = function(event, context) {
            const batchWriteRequest = {
              RequestItems: {
                "TargetingGroups": [ // this must match the table name
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "9d0c401c-e2f8-4335-a3bd-94d12cb21ef6",
                        ContentId: "0b633dee-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.05202,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_18_TO_21"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_46_TO_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"TECHNICAL_BOOKS","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "34e1a778-dcf8-44c8-9bd6-9b5efefb1e07",
                        ContentId: "0b633dee-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.15155,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_18_TO_21"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_46_TO_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendValueTargetingPredicate","inverse":false,"targetedCategory":"VIDEO_GAMES","comparison":"GT","targetedValue":50}]'
                      }
                    }
                  }
                 ]
              }
            };
            docClient.batchWrite(batchWriteRequest, function (err, data) {
              if (err) {
                  console.error(err);
                  response.send(event, context, "FAILED", {"error" : err});
              } else {
                  response.send(event, context, "SUCCESS", {"data" : data});
              }
            });
          };
      Handler: index.handler
      Role:
        Fn::GetAtt: [ LambdaRole , "Arn" ] # Same role as the service lambda with DDB write access
      Runtime: nodejs12.x
      Timeout: 60

  InitializeTargetingGroupTable10:
    Type: Custom::InitFunction
    DependsOn: TargetingGroupsTable
    Properties:
      ServiceToken:
        Fn::GetAtt: [ InitializeTargetingGroupTableFunction10 , "Arn" ]
      DynamoTableName:
        Ref: TargetingGroupsTable

  InitializeTargetingGroupTableFunction11:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          const AWS = require("aws-sdk");
          const response = require('./cfn-response');
          const docClient = new AWS.DynamoDB.DocumentClient();
          exports.handler = function(event, context) {
            const batchWriteRequest = {
              RequestItems: {
                "TargetingGroups": [ // this must match the table name
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "c8597aa6-c363-4984-be55-4a2009857037",
                        ContentId: "0b635ca2-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.08514,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_36_TO_45"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"AGE_46_TO_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.AgeTargetingPredicate","inverse":true,"targetedAgeRange":"OVER_60"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.PrimeBenefitTargetingPredicate","inverse":false,"benefitToHave":"FREE_EXPEDITED_SHIPPING"},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"TECHNICAL_BOOKS","comparison":"GT","targetedNumberOfPurchases":0},{"@class":"com.amazon.ata.advertising.service.targeting.predicate.CategorySpendFrequencyTargetingPredicate","inverse":false,"targetedCategory":"COMPUTERS","comparison":"GT","targetedNumberOfPurchases":0}]'
                      }
                    }
                  },
                  {
                    PutRequest: {
                      Item: {
                        TargetingGroupId: "ef281ea0-da28-422b-b71f-d945df43c461",
                        ContentId: "0b635ef0-9c16-11e8-98d0-529269fb1459",
                        ClickThroughRate: 0.03725,
                        TargetingPredicates: '[{"@class":"com.amazon.ata.advertising.service.targeting.predicate.ParentPredicate","inverse":false}]'
                      }
                    }
                  }
                 ]
              }
            };
            docClient.batchWrite(batchWriteRequest, function (err, data) {
              if (err) {
                  console.error(err);
                  response.send(event, context, "FAILED", {"error" : err});
              } else {
                  response.send(event, context, "SUCCESS", {"data" : data});
              }
            });
          };
      Handler: index.handler
      Role:
        Fn::GetAtt: [ LambdaRole , "Arn" ] # Same role as the service lambda with DDB write access
      Runtime: nodejs12.x
      Timeout: 60

  InitializeTargetingGroupTable11:
    Type: Custom::InitFunction
    DependsOn: TargetingGroupsTable
    Properties:
      ServiceToken:
        Fn::GetAtt: [ InitializeTargetingGroupTableFunction11 , "Arn" ]
      DynamoTableName:
        Ref: TargetingGroupsTable
